<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><link rel="shortcut icon" type="image/x-icon" href="/ccextractor-wiki-test/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Translating captions | CCExtractor</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Translating captions" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="You can use the cctranslate tool (implemented by Oleg) to translate extracted captions in realtime and in SubRip formatted files. We use the Google Translate API for translation, but the tool is built so developers can easily add other translation engines. How realtime translation works?" />
<meta property="og:description" content="You can use the cctranslate tool (implemented by Oleg) to translate extracted captions in realtime and in SubRip formatted files. We use the Google Translate API for translation, but the tool is built so developers can easily add other translation engines. How realtime translation works?" />
<link rel="canonical" href="https://dumbmachine.github.io/ccextractor-wiki-test/2020/02/20/public-gsoc-translating_captions.html" />
<meta property="og:url" content="https://dumbmachine.github.io/ccextractor-wiki-test/2020/02/20/public-gsoc-translating_captions.html" />
<meta property="og:site_name" content="CCExtractor" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-02-20T00:00:00-06:00" />
<script type="application/ld+json">
{"description":"You can use the cctranslate tool (implemented by Oleg) to translate extracted captions in realtime and in SubRip formatted files. We use the Google Translate API for translation, but the tool is built so developers can easily add other translation engines. How realtime translation works?","@type":"BlogPosting","headline":"Translating captions","dateModified":"2020-02-20T00:00:00-06:00","datePublished":"2020-02-20T00:00:00-06:00","url":"https://dumbmachine.github.io/ccextractor-wiki-test/2020/02/20/public-gsoc-translating_captions.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://dumbmachine.github.io/ccextractor-wiki-test/2020/02/20/public-gsoc-translating_captions.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
  <link rel="stylesheet" href="/ccextractor-wiki-test/assets/main.css">
  <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://dumbmachine.github.io/ccextractor-wiki-test/feed.xml" title="CCExtractor" />

  <script>
  function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
  }
  window.onload = wrap_img;
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", function(){
      // add link icon to anchor tags
      var elem = document.querySelectorAll(".anchor-link")
      elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
      // remove paragraph tags in rendered toc (happens from notebooks)
      var toctags = document.querySelectorAll(".toc-entry")
      toctags.forEach(e => (e.firstElementChild.innerText = e.firstElementChild.innerText.replace('¶', '')))
    });
  </script>
</head><body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/ccextractor-wiki-test/">CCExtractor</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/ccextractor-wiki-test/about/">About Me</a><a class="page-link" href="/ccextractor-wiki-test/search/">Search</a><a class="page-link" href="/ccextractor-wiki-test/categories/">Tags</a><a class="page-link" href="/ccextractor-wiki-test/_pages/Gsoc%20start%20here.html">Google Summer of Code 2020</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Translating captions</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-02-20T00:00:00-06:00" itemprop="datePublished">
        Feb 20, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      2 min read
    
</span></p>

    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>You can use the <a href="https://github.com/kisselef/cctranslate">cctranslate</a> tool (implemented by Oleg) to translate extracted captions in realtime and in SubRip formatted files. We use the <a href="https://cloud.google.com/translate"> Google Translate API</a> for translation, but the tool is built so developers can easily add other translation engines.</p>
<h3 id="how-realtime-translation-works">How realtime translation works?</h3>

<ol>
  <li><em>ccextractor</em> starts with sharing service on</li>
  <li><em>ccextractor</em> launches <em>cctranslate</em> process</li>
  <li>launched instance of <em>cctranslate</em> subscribes to <em>ccextractor</em>s’ messages</li>
  <li><em>ccextractor</em> publishes extracted subtitles to all subscribers</li>
  <li><em>cctranslate</em> requests translation from translation service and saves translated captions to an output file</li>
</ol>

<h4 id="ok-and-what-is-a-sharing-service">Ok, and what is a “sharing service”?</h4>

<p>Sharing service is a <a href="https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern">Publisher-Subscriber IPC Pattern</a> publisher implementation. It uses <a href="http://nanomsg.org">nanomsg</a> as a cross-platform socket library, that provides simple interface to implement pub-sub model and supports lots of transport mechanisms. To serialize messages <a href="https://github.com/protobuf-c/protobuf-c">protobuf-c</a> implementation of <a href="https://developers.google.com/protocol-buffers">Google Protocol Buffers</a> is used. Both of used solutions are language-independent, so sharing service could be easily used by third-party developers to create new solutions based on ccextractor.</p>

<h4 id="what-about-the-cctranslate-tool">What about the cctranslate tool?</h4>

<p>Cctranslate tool was designed to be cross-platform and is implemented in C language. It uses:</p>

<ul>
  <li>
    <p><a href="http://curl.haxx.se/libcurl">libcurl</a> to perform http/https requests</p>
  </li>
  <li>
    <p><a href="http://nanomsg.org">nanomsg</a> as a socket library</p>
  </li>
  <li>
    <p><a href="https://github.com/protobuf-c/protobuf-c">protobuf-c</a> to parse serialized messages</p>
  </li>
  <li>
    <p><a href="http://sourceforge.net/projects/cjson/">CJSON</a> to parse responses from <a href="https://cloud.google.com/translate/">Google Translate API</a></p>
  </li>
</ul>

<p>Standalone SubRip-formatted files could also be translated using this tool along with realtime translation.</p>

<h4 id="sharing-service-messaging-format">Sharing service messaging format</h4>

<p>Coming soon in a separate document</p>

<h3 id="how-to-use-it">How to use it?</h3>

<p>First, you have to compile it. It uses cmake build automation system, so make sure you have it installed.
For Linux/MacOSX/UNIX use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir build &amp;&amp; cd build
$ cmake ../
$ make
</code></pre></div></div>

<p>Make sure nanomsg and libcurl dev packages are downloaded. If your distribution doesn’t have a package system or these packages are not supported by maintainer, you can download tarballs and compile it by yourself.</p>

<p>Then, create a <a href="https://cloud.google.com">Google Cloud Platform</a> account (or use your existing) and generate an API key.</p>

<h5 id="using-cctranslate-as-a-standalone-text-file-captions-translator">Using cctranslate as a standalone text file captions translator</h5>

<p>Check what languages are available at the moment:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$./cctranslate --list-langs --key=YOUR_API_KEY
</code></pre></div></div>

<p>Pick up languages you want your subs be translated to, and run:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$./cctranslate --input=subs.srt --langs=fr,it,th --key=YOUR_API_KEY
</code></pre></div></div>

<h5 id="using-cctranslate-for-realtime-translation">Using cctranslate for realtime translation</h5>

<p>Copy cctranslate tool to ccextractors’ binary directory. There are two ways to translate realtime: launch ccextractor with translating mode on and launch cctranslate tool to connect to already running instance of ccextractor.</p>

<p>To launch ccextractor with translating mode on, run:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./ccextractor INPUT_OPTIONS -translate LANGUAGE_LIST -translate-auth YOUR_API_KEY
</code></pre></div></div>

<p>To connect cctranslate tool to already running instance of ccextractor:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./cctranslate --source=extractor --key=YOUR_API_KEY
</code></pre></div></div>

<p>In the second case, ccextractor has to be started with sharing service on. To do that add <strong>-enable-sharing</strong> option to arguments. By default, it starts TCP sharing service on localhost:3269. You can set other nanomsg-supported transport type to share captions using <strong>-sharing-url</strong> arg in format transport:address.</p>

  </div><a class="u-url" href="/ccextractor-wiki-test/2020/02/20/public-gsoc-translating_captions.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/ccextractor-wiki-test/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">CCExtractor</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">CCExtractor</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list">
  <li><a href="https://github.com/DumbMachine"><svg class="social svg-icon"><use xlink:href="/ccextractor-wiki-test/assets/minima-social-icons.svg#github"></use></svg> <span class="username">DumbMachine</span></a></li><li><a href="https://www.twitter.com/nothing"><svg class="social svg-icon"><use xlink:href="/ccextractor-wiki-test/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">nothing</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Test to try and use fastpages to host GSOC 2020 related data of dokuwiki based CCExtractor blog on fastpages</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
