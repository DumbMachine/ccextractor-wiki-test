<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><link rel="shortcut icon" type="image/x-icon" href="/ccextractor-wiki-test/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Activity Extractor Technical Documentation | CCExtractor</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Activity Extractor Technical Documentation" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This page contains how the service modules were coded and also how to add support for a new service." />
<meta property="og:description" content="This page contains how the service modules were coded and also how to add support for a new service." />
<link rel="canonical" href="https://dumbmachine.github.io/ccextractor-wiki-test/2020/02/20/public-codein-activity_extractor_technical_docs.html" />
<meta property="og:url" content="https://dumbmachine.github.io/ccextractor-wiki-test/2020/02/20/public-codein-activity_extractor_technical_docs.html" />
<meta property="og:site_name" content="CCExtractor" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-02-20T00:00:00-06:00" />
<script type="application/ld+json">
{"description":"This page contains how the service modules were coded and also how to add support for a new service.","@type":"BlogPosting","headline":"Activity Extractor Technical Documentation","dateModified":"2020-02-20T00:00:00-06:00","datePublished":"2020-02-20T00:00:00-06:00","url":"https://dumbmachine.github.io/ccextractor-wiki-test/2020/02/20/public-codein-activity_extractor_technical_docs.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://dumbmachine.github.io/ccextractor-wiki-test/2020/02/20/public-codein-activity_extractor_technical_docs.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
  <link rel="stylesheet" href="/ccextractor-wiki-test/assets/main.css">
  <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://dumbmachine.github.io/ccextractor-wiki-test/feed.xml" title="CCExtractor" />

  <script>
  function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
  }
  window.onload = wrap_img;
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", function(){
      // add link icon to anchor tags
      var elem = document.querySelectorAll(".anchor-link")
      elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
      // remove paragraph tags in rendered toc (happens from notebooks)
      var toctags = document.querySelectorAll(".toc-entry")
      toctags.forEach(e => (e.firstElementChild.innerText = e.firstElementChild.innerText.replace('¶', '')))
    });
  </script>
</head><body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/ccextractor-wiki-test/">CCExtractor</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/ccextractor-wiki-test/about/">About Me</a><a class="page-link" href="/ccextractor-wiki-test/search/">Search</a><a class="page-link" href="/ccextractor-wiki-test/categories/">Tags</a><a class="page-link" href="/ccextractor-wiki-test/_pages/Gsoc%20start%20here.html">Google Summer of Code 2020</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Activity Extractor Technical Documentation</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-02-20T00:00:00-06:00" itemprop="datePublished">
        Feb 20, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      5 min read
    
</span></p>

    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>This page contains how the service modules were coded and also how to add support for a new service.</p>

<h2 id="module-information">Module Information</h2>

<h3 id="activityextractorpy">ActivityExtractor.py</h3>
<p>This module is responsible for processing the parameters passed through the command line and calling the appropriate streaming service.</p>

<p>It passes the streaming service a dictionary containing credentials required to complete the process<br />
The dictionary is formatted like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>parameters = {
'url': self.url,
'email': self.email,
'password': self.password,
'user': self.user
}
</code></pre></div></div>

<p>url: The url the driver initially navigates to.<br />
email: The email required to log into the service.<br />
password: The password associated with the email.<br />
user: <em>(Only required for Netflix)</em> The profile name the user wishes to retrieve viewing activity from.\</p>

<h3 id="commonpy">common.py</h3>

<p>Contains modules common to all services.</p>
<h5 id="-output_activityservice-activity_list">&gt; output_activity(SERVICE, activity_list)</h5>

<p>Module to output activity into a .txt file.<br />
<br />
Accepts 2 parameters ‘SERVICE’ and ‘activity_list’:<br />
SERVICE: Name of the service calling the function.<br />
activity_list: List of viewing activity extracted from the streaming service.\</p>

<h3 id="hulupy">hulu.py</h3>

<p>Gets viewing activity from Hulu.</p>
<h5 id="-get_activity">&gt; get_activity()</h5>

<p>Called from the Main Module. It’s main purpose is to initialize the process and call login_hulu()</p>
<h5 id="-login_hulu">&gt; login_hulu()</h5>

<p>First this function creates an instance of Chrome and passes potential arguments to the driver.<br />
It then navigates to www.hulu.com and logs in with the user credentials. Then calls navigate_site()</p>
<h5 id="-navigate_site">&gt; navigate_site()</h5>

<p>The main purpose of this function is to navigate to the ‘History’ page on Hulu.</p>
<h5 id="-navigate_pages">&gt; navigate_pages()</h5>

<p>Depending on the length of the user’s viewing history there may be multiple pages of viewing history.<br />
This function calls get_page_activity() for every page of viewing history. Then calls common.output_activity().\</p>
<h5 id="-get_page_activity">&gt; get_page_activity()</h5>

<p>Gets all the viewing activity on the current viewing history page. Also displays a progress bar to the user.\</p>

<h3 id="amazonpy">amazon.py</h3>

<p>Gets viewing activity from Amazon.</p>
<h5 id="-get_activity-1">&gt; get_activity()</h5>

<p>Called from the Main Module. It’s main purpose is to initialize the process and call login_amazon()</p>
<h5 id="-login_amazon">&gt; login_amazon()</h5>

<p>First this function creates an instance of Chrome and passes potential arguments to the driver.<br />
It then navigates to https://www.amazon.com/gp/sign-in.html and logs in with the user credentials. It then navigates to the viewing history page by passing a url to the driver. Calls navigate_pages()</p>
<h5 id="-navigate_pages-1">&gt; navigate_pages()</h5>

<p>Depending on the length of the user’s viewing history there may be multiple pages of viewing history.<br />
This function calls get_page_activity() for every page of viewing history. Then calls common.output_activity().\</p>
<h5 id="-get_page_activity-1">&gt; get_page_activity()</h5>

<p>Gets all the viewing activity on the current viewing history page.\</p>

<h3 id="netflixpy">netflix.py</h3>

<p>Gets viewing activity from Netflix.</p>
<h5 id="-get_activity-2">&gt; get_activity()</h5>

<p>Called from the Main Module. It’s main purpose is to initialize the process and call login_netflix()</p>
<h5 id="-login_amazon-1">&gt; login_amazon()</h5>

<p>First this function creates an instance of Chrome and passes potential arguments to the driver.<br />
It then navigates to https://www.netflix.com/Login and logs in with the user credentials. It then calls get_active_profile()</p>
<h5 id="-get_active_profile">&gt; get_active_profile()</h5>

<p>Selects user profile based on profile name present in parameters[‘user’]. Calls navigate_site()</p>
<h5 id="-navigate_site-1">&gt; navigate_site()</h5>

<p>Calls hover_click() then clicks the ‘Viewing Activity’ link once hover_click() has navigated to the user’s account page. Then calls scroll_to_bottom()</p>
<h5 id="-hover_click">&gt; hover_click()</h5>

<p>Hovers on the profile icon in the top right corner of the Netflix homepage. Then clicks on ‘Your Account’ on the dropdown menu that appears. Returns True or False depending on whether the process was successful.</p>
<h5 id="-scroll_to_bottom">&gt; scroll_to_bottom()</h5>

<p>Depending on the length of the user’s viewing activity Netflix displays only a portion of it. In order to have Netflix display the full list this function is called.<br />
Scrolls to the bottom of the page and waits for Netflix to load the next dynamic page of activity. This may be repeated multiple time until all of the activity is displayed. Calls get_page_activity()</p>
<h5 id="-get_page_activity-2">&gt; get_page_activity()</h5>

<p>Gets all viewing activity from the page. Displays a progress bar to the user. Calls common.output_activity()\</p>

<h2 id="new-service-instructions">New Service Instructions</h2>

<p>In order to add a new service to the platform, follow these steps.</p>
<h3 id="instructions">Instructions</h3>

<p><strong>1. Add your service and it’s parameters to the file ‘userconfig.ini’</strong><br />
Follow this format when adding your service:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[SERVICE_NAME]
url      = service_login_page_url
email    = test@email.com
password = test
</code></pre></div></div>

<p><strong>2. Create a .py file for your service.</strong><br />
Take a look at hulu.py, amazon.py or netflix.py as a reference.<br />
<br />
Your file must have a class containing all of the functions required to login and get viewing activity. The class should be named like ‘SERVICE_NAMEActivityExtractor’.<br />
Example: NetflixActivityExtractor<br />
<br />
Your class’s init() function needs to accept an argument that will contain the parameters which ActivityExtractor.py will pass.<br />
Here is the general format:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def __init__(self, parameters):
self.parameters = parameters
self.driver = None
...
</code></pre></div></div>

<p>The main things your function should accomplish:\</p>
<ul>
  <li>Log into streaming service\</li>
  <li>Navigate to viewing activity page\</li>
  <li>Retrieve viewing activity\</li>
  <li>Display progress bar (if possible)\</li>
  <li>Call common.output_activity() to output viewing activity into a .txt file<br />
<br />
common.output_activity() accepts 2 parameters. The first is the name of the viewing service, the second is a list containing all of the viewing activity. Make user to ‘import common’ to use the function.<br />
\</li>
</ul>

<p><strong>3. Add you service into ActivityExtractor.py.</strong><br />
In ‘ActivityExtractor.py’, create an import statement to import your service class from your service file.<br />
It should be something like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from SERVICE_NAME import SERVICE_NAMEActivityExtractor
</code></pre></div></div>

<p>Next you have to add your service into supported_services.<br />
In the ActivityExtractor, the init() function has a dictionary named ‘self.supported_services’. Add your service into the dictionary following the format of the other services.<br />
It should look something like this:\</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>self.supported_services = {
'amazon': AmazonActivityExtractor,
'hulu': HuluActivityExtractor,
'netflix': NetflixActivityExtractor,
'SERVICE_NAME': SERVICENAMEActivityExtractor
}
</code></pre></div></div>

<p><strong>4. Test the program with your service and report any errors.</strong><br />
If your service worked successfully create a pull request to the repository and it’ll be added. If any errors are thrown that you can’t solve yourself, create an issue in the repository and we’ll try helping you out.<br />
\</p>

<p><strong>5. Add your service to this documentation page.</strong><br />
Contact Carlos to get login credentials for this page and add your service following the format of the other streaming services.<br />
<br />
\</p>

<p><strong>For bug fixes create an issue on the repository</strong><br />
<strong>For any other inquiries contact me at m13basra@gmail.com</strong></p>

  </div><a class="u-url" href="/ccextractor-wiki-test/2020/02/20/public-codein-activity_extractor_technical_docs.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/ccextractor-wiki-test/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">CCExtractor</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">CCExtractor</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list">
  <li><a href="https://github.com/DumbMachine"><svg class="social svg-icon"><use xlink:href="/ccextractor-wiki-test/assets/minima-social-icons.svg#github"></use></svg> <span class="username">DumbMachine</span></a></li><li><a href="https://www.twitter.com/nothing"><svg class="social svg-icon"><use xlink:href="/ccextractor-wiki-test/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">nothing</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Test to try and use fastpages to host GSOC 2020 related data of dokuwiki based CCExtractor blog on fastpages</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
